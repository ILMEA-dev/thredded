<% if user %>
  <% if !user.thredded_anonymous? %>
    <% user_path = user_path(user) %>
    <% if user_path.blank? %>
<span class='thredded--username'>
  <a href="mailto:<%= ERB::Util.html_escape(user.email) %>"><%= user.thredded_display_name %></a>
</span>
    <% else %>
<a href="<%= user_path %>"><%= user.thredded_display_name %></a>
<a href="mailto:<%= ERB::Util.html_escape(user.email) %>" class="thredded--user-email" title="Email <%= user.thredded_display_name %>">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
    <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
  </svg>
</a>
    <% end %>
  <% else %>
<%= user.thredded_display_name %>
  <% end %>
<% else %>
<em><%= t 'thredded.null_user_name' %></em>
<% end %>
